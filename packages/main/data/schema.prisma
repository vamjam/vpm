datasource db {
  provider = "sqlite"
  url      = "file:./vpm.db"
}

generator client {
  provider = "prisma-client-js"
}

model Group {
  id       Int       @id @default(autoincrement())
  name     String    @unique
  children Package[]
}

model Package {
  id         String    @id
  importedAt DateTime  @default(now())
  createdAt  DateTime?
  name       String
  size       Int?
  path       String

  type         Int?
  version      Int
  description  String?
  instructions String?
  credits      String?
  licenseType  String?

  creator   Creator     @relation(fields: [creatorId], references: [id])
  creatorId Int
  group     Group?      @relation(fields: [groupId], references: [id])
  groupId   Int?
  images    Image[]
  hub       HubPackage?
  tags      Tag[]
}

model HubPackage {
  id                 Int     @id @default(autoincrement())
  resourceId         Int
  attachmentId       Int
  vamPackageId       Int
  discussionThreadId Int?
  downloadUrl        String?
  title              String
  tagline            String?
  dependencyCount    Int?
  package            Package @relation(fields: [packageId], references: [id])
  packageId          String  @unique
}

model Tag {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  package   Package? @relation(fields: [packageId], references: [id])
  packageId String?
}

model Image {
  id        Int      @id @default(autoincrement())
  path      String
  sort      Int      @default(0)
  package   Package? @relation(fields: [packageId], references: [id])
  packageId String?
}

model Creator {
  id      Int       @id @default(autoincrement())
  name    String    @unique
  avatar  String?
  Package Package[]
}
